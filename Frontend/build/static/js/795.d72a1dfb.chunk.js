"use strict";(self.webpackChunkecom_book_fe=self.webpackChunkecom_book_fe||[]).push([[795],{858:function(e,t,n){n(2791);var r=n(184);t.Z=function(e){return(0,r.jsx)(r.Fragment,{children:e.touched&&(0,r.jsx)("p",{className:" mb-1 text-danger",children:e.message})})}},2795:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(885),a=n(2791),i=n(8596),o=n(8197),s=(0,i.Z)((function(e){return{editWrapper:{padding:"42px 0 80px","@media (max-width: 991px)":{padding:"35px 0 50px"},"@media (max-width: 767px)":{padding:"35px 0 40px"},"& .btn-wrapper":{"& .btn":{height:"40px",lineHeight:"40px",borderRadius:"4px",textTransform:"none",fontSize:"16px",minWidth:"100px","&+.btn":{marginLeft:"10px"}}},"& .form-row-wrapper":{display:"flex",flexWrap:"wrap",margin:"0 -15px","& .MuiOutlinedInput-multiline":{padding:"0",backgroundColor:o.O9.white,"& .MuiOutlinedInput-inputMultiline":{padding:"5px 15px !important",borderRadius:"0",lineHeight:"1.2",border:"1px solid #d5d5d5",height:"80px !important"}},"& .form-col":{padding:" 0 15px",maxWidth:"50%",flex:"0 0 50%",position:"relative","@media(max-width:767px)":{maxWidth:"100%",flex:"0 0 100%"},"&.description":{"& .text-danger":{top:"77%"}},"& .uploaded-file-name":{marginBottom:"35px",paddingTop:"28px","@media(max-width:767px)":{paddingTop:"0px"},"& em":{height:"30px",width:"30px",display:"inline-block",marginRight:"10px"},"& span":{display:"inline-block",margin:"-10px -10px -10px 0",padding:"10px",cursor:"pointer",fontSize:"20px",color:"#000",fontWeight:700}},"& .file-upload-btn":{position:"relative",display:"block",marginBottom:"35px",paddingTop:"25px","@media(max-width:767px)":{paddingTop:"0px"},"& .MuiInputBase-root ":{"&::after":{display:"none"},"&::before":{display:"none"}},"& .btn":{lineHeight:"40px",height:"40px",padding:"0 10px",minWidth:"120px",position:"absolute",borderRadius:"0px",textTransform:"none",fontSize:"16px",left:"0"},"& .MuiInput-underline:before":{opacity:"0"},"& .MuiInput-underline:after":{opacity:"0"}},"&.full-width":{maxWidth:"100%",flex:"0 0 100%"},"& p":{"&.text-danger":{fontSize:"14px",color:o.O9.primary,position:"absolute",top:"70%",margin:"0"}}},"& .MuiInputBase-formControl":{marginBottom:"35px"}},"& .dropdown-wrapper":{"& .MuiOutlinedInput-notchedOutline":{borderRadius:"0"},"& .MuiInputBase-input":{backgroundColor:o.O9.white,height:"40px",lineHeight:"40px",borderRadius:"4px"}}}}})),u=n(4929),c=n(8302),d=n(3188),p=n(6828),l=n(6168),m=n(8533),h=n(1859),f=n(7104),x=n(6513),g=n(9271),v=n(9421),b=n(2506),Z=n(858),y=n(6960),w=n(6348),N=n(4231),j=n(184),k=function(){var e=(0,w.a)(),t=(0,a.useState)([]),n=(0,r.Z)(t,2),i=n[0],o=n[1],k=(0,a.useState)([]),I=(0,r.Z)(k,2),C=(I[0],I[1],s()),O=(0,g.k6)(),P=(0,a.useState)({id:0,name:"",price:"",categoryId:0,description:"",base64image:""}),T=(0,r.Z)(P,2),B=T[0],E=T[1],D=(0,g.UO)().id;(0,a.useEffect)((function(){D&&S(),N.Z.getAll({pageIndex:0}).then((function(e){o(e.records)}))}),[D]);var R=u.Ry().shape({name:u.Z_().required("Book Name is required"),description:u.Z_().required("Description is required"),categoryId:u.Rx().min(1,"Category is required").required("Category is required"),price:u.Rx().required("Price is required"),base64image:u.Z_().required("Image is required")}),S=function(){v.Z.getById(Number(D)).then((function(e){E({id:e.id,name:e.name,price:e.price,categoryId:e.categoryId,description:e.description,base64image:e.base64image})}))};return(0,j.jsx)("div",{className:C.editWrapper,children:(0,j.jsxs)("div",{className:"container",children:[(0,j.jsxs)(c.Z,{variant:"h1",children:[D?"Edit":"Add"," Book"]}),(0,j.jsx)(b.J9,{initialValues:B,validationSchema:R,enableReinitialize:!0,onSubmit:function(e){v.Z.save(e).then((function(t){y.Am.success(e.id?"Record updated successfully":"Record created successfully"),O.push("/book")}))},children:function(t){var n=t.values,r=t.errors,a=t.touched,o=t.handleBlur,s=t.handleChange,u=t.handleSubmit,c=(t.setValues,t.setFieldError,t.setFieldValue);return(0,j.jsxs)("form",{onSubmit:u,children:[(0,j.jsxs)("div",{className:"form-row-wrapper",children:[(0,j.jsxs)("div",{className:"form-col",children:[(0,j.jsx)(d.Z,{id:"first-name",name:"name",label:"Book Name *",variant:"outlined",inputProps:{className:"small"},value:n.name,onBlur:o,onChange:s}),(0,j.jsx)(Z.Z,{message:r.name,touched:a.name})]}),(0,j.jsxs)("div",{className:"form-col",children:[(0,j.jsx)(d.Z,{type:"number",id:"price",name:"price",label:"Book Price (RS)*",variant:"outlined",inputProps:{className:"small"},value:n.price,onBlur:o,onChange:s}),(0,j.jsx)(Z.Z,{message:r.price,touched:a.price})]}),(0,j.jsxs)("div",{className:"form-col",children:[(0,j.jsxs)(p.Z,{className:"dropdown-wrapper",variant:"outlined",children:[(0,j.jsx)(l.Z,{htmlFor:"select",children:"Category *"}),(0,j.jsx)(m.Z,{name:"categoryId",id:"category",onChange:s,className:e.customSelect,MenuProps:{classes:{paper:e.customSelect}},value:n.categoryId,children:null===i||void 0===i?void 0:i.map((function(e){return(0,j.jsx)(h.Z,{value:e.id,children:e.name},"category"+e.id)}))})]}),(0,j.jsx)(Z.Z,{message:r.categoryId,touched:a.categoryId})]}),(0,j.jsxs)("div",{className:"form-col",children:[!n.base64image&&(0,j.jsxs)(j.Fragment,{children:[" ",(0,j.jsxs)("label",{htmlFor:"contained-button-file",className:"file-upload-btn",children:[(0,j.jsx)(f.Z,{id:"contained-button-file",type:"file",inputProps:{className:"small"},onBlur:o,onChange:function(e){!function(e,t,n){var r=e.target.files;if(null!==r&&void 0!==r&&r.length){var a=e.target.files[0],i=a.name.split(".").pop();if(["png","jpg","jpeg"].includes(null===i||void 0===i?void 0:i.toLowerCase())){var o=new FileReader;o.readAsDataURL(a),o.onload=function(){t("base64image",o.result)},o.onerror=function(e){throw e}}else y.Am.error("only jpg,jpeg and png files are allowed")}else t("base64image","")}(e,c)}}),(0,j.jsx)(x.Z,{variant:"contained",component:"span",className:"btn pink-btn",children:"Upload"})]}),(0,j.jsx)(Z.Z,{message:r.base64image,touched:a.base64image})]}),n.base64image&&(0,j.jsxs)("div",{className:"uploaded-file-name",children:[(0,j.jsx)("em",{children:(0,j.jsx)("img",{src:n.base64image,alt:""})}),"image"," ",(0,j.jsx)("span",{onClick:function(){c("base64image","")},children:"x"})]})]}),(0,j.jsxs)("div",{className:"form-col full-width description",children:[(0,j.jsx)(d.Z,{id:"description",name:"description",label:"Description *",variant:"outlined",value:n.description,multiline:!0,onBlur:o,onChange:s}),(0,j.jsx)(Z.Z,{message:r.description,touched:a.description})]})]}),(0,j.jsxs)("div",{className:"btn-wrapper",children:[(0,j.jsx)(x.Z,{className:"green-btn btn",variant:"contained",type:"submit",color:"primary",disableElevation:!0,children:"Save"}),(0,j.jsx)(x.Z,{className:"pink-btn btn",variant:"contained",type:"button",color:"primary",disableElevation:!0,onClick:function(){O.push("/book")},children:"Cancel"})]})]})}})]})})}},9421:function(e,t,n){var r=n(5861),a=n(5671),i=n(3144),o=n(7757),s=n.n(o),u=n(4136),c=function(){function e(){(0,a.Z)(this,e),this.ENDPOINT="api/Book"}return(0,i.Z)(e,[{key:"getAll",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.ENDPOINT,"/list"),e.abrupt("return",u.Z.get(n,{params:t}).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.ENDPOINT,"/").concat(t),e.abrupt("return",u.Z.get(n).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.ENDPOINT,"/Delete/").concat(t),e.abrupt("return",u.Z.delete(n).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=5;break}return n="".concat(this.ENDPOINT,"/Update"),e.abrupt("return",u.Z.put(n,t).then((function(e){return e.data})));case 5:return r="".concat(this.ENDPOINT,"/Add"),e.abrupt("return",u.Z.post(r,t).then((function(e){return e.data})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.Z=new c},4231:function(e,t,n){var r=n(5861),a=n(5671),i=n(3144),o=n(7757),s=n.n(o),u=n(4136),c=function(){function e(){(0,a.Z)(this,e),this.ENDPOINT="api/Category"}return(0,i.Z)(e,[{key:"getAll",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.ENDPOINT,"/list"),e.abrupt("return",u.Z.get(n,{params:t}).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.ENDPOINT,"/").concat(t),e.abrupt("return",u.Z.get(n).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.ENDPOINT,"/Delete/").concat(t),e.abrupt("return",u.Z.delete(n).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id){e.next=5;break}return n="".concat(this.ENDPOINT,"/Update"),e.abrupt("return",u.Z.put(n,t).then((function(e){return e.data})));case 5:return r="".concat(this.ENDPOINT,"/Add"),e.abrupt("return",u.Z.post(r,t).then((function(e){return e.data})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.Z=new c},4136:function(e,t,n){var r=n(5861),a=n(7757),i=n.n(a),o=n(4569),s=n.n(o),u=n(6960),c=s().create({baseURL:"https://localhost:44394/",timeout:124e5,responseType:"json"}),d=[],p="";function l(){document.body.classList.add("loader-open")}function m(e){var t=d.indexOf(e);t>=0&&d.splice(t,1),d.length>0?l():document.body.classList.remove("loader-open"),e===p&&(p="",d=d.filter((function(t){return t!==e})))}c.interceptors.request.use(function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers&&(t.headers["Content-Type"]="application/json"),!0!==t.headers.isDisableLoader&&(d.push(t.url),l()),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){alert(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;return m(e.config.url),null!==t&&void 0!==t&&t.code&&"OK"!==(null===t||void 0===t?void 0:t.code)?Promise.reject(new Error(t.detail||"Error")):Promise.resolve(e)}),(function(e){return m(e.config.url),u.Am.error(e.response.data.detail),Promise.reject(e)})),t.Z=c},1859:function(e,t,n){var r=n(5987),a=n(4942),i=n(7462),o=n(2791),s=n(8182),u=n(8317),c=n(8096),d=o.forwardRef((function(e,t){var n,a=e.classes,u=e.className,d=e.component,p=void 0===d?"li":d,l=e.disableGutters,m=void 0!==l&&l,h=e.ListItemClasses,f=e.role,x=void 0===f?"menuitem":f,g=e.selected,v=e.tabIndex,b=(0,r.Z)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==v?v:-1),o.createElement(c.Z,(0,i.Z)({button:!0,role:x,tabIndex:n,component:p,selected:g,disableGutters:m,classes:(0,i.Z)({dense:a.dense},h),className:(0,s.Z)(a.root,u,g&&a.selected,!m&&a.gutters),ref:t},b))}));t.Z=(0,u.Z)((function(e){return{root:(0,i.Z)({},e.typography.body1,(0,a.Z)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:(0,i.Z)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(d)}}]);
//# sourceMappingURL=795.d72a1dfb.chunk.js.map